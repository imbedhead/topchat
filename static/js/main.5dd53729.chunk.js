(this.webpackJsonptopchat=this.webpackJsonptopchat||[]).push([[0],{37:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),i=a.n(s),c=(a(37),a(14)),o=a(3),l=a(4),u=a(19),h=a(5),p=a(6),d=a(24),m=a.n(d),b=(a(45),a(46),a(61)),j=a(57),f=a(1),O=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).badgeType="chat-badge "+n.props.className,n.key=n.props.key,n}return Object(l.a)(a,[{key:"getBadgeTooltipUrl",value:function(){return"https://cdn.frankerfacez.com/static/badges/twitch/2/".concat(this.props.badgeName.toLowerCase(),"/1/4.png")}},{key:"render",value:function(){return Object(f.jsx)(b.a,{placement:"top",overlay:Object(f.jsxs)(j.a,{id:"tooltip-badge-".concat((new Date).valueOf()),children:[Object(f.jsx)("img",{className:this.badgeType,src:this.getBadgeTooltipUrl(),alt:this.props.badgeName}),Object(f.jsx)("div",{children:this.props.badgeName})]}),children:Object(f.jsx)("span",{className:this.badgeType},this.key)},"badge-top-".concat((new Date).valueOf()))}}]),a}(r.a.Component),g=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).badges=n.props.badges,n}return Object(l.a)(a,[{key:"render",value:function(){return Object(f.jsx)("span",{children:this.badges.map((function(e){return Object(f.jsx)(O,{badgeName:e.name,className:e.type},e.key)}))})}}]),a}(r.a.Component),v=(a(48),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"getLargeEmoteUrl",value:function(e){return e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(" "))}},{key:"render",value:function(){return Object(f.jsx)("span",{children:Object(f.jsx)(b.a,{placement:"top",overlay:Object(f.jsx)(j.a,{id:"tooltip-".concat((new Date).valueOf()),children:Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:this.getLargeEmoteUrl(this.props.emote.urls),alt:this.props.emote.name}),Object(f.jsx)("div",{children:this.props.emote.name})]})}),children:Object(f.jsx)("img",{srcSet:this.props.emote.urls,alt:this.props.emote.name})},"top-".concat((new Date).valueOf()))})}}]),a}(r.a.Component)),y=v,x=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"parseClipLink",value:function(e){var t=e.substr(e.indexOf(".tv/")+4);return"https://clips.twitch.tv/embed?clip=".concat(t,"&parent=localhost")}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("iframe",{src:this.parseClipLink(this.props.url),allowFullScreen:"true",title:"Twitch Clip"})},"clip-".concat((new Date).valueOf()))}}]),a}(r.a.Component),k=x,w=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"isClip",value:function(e){return e.indexOf("clips.twitch.tv")>=0}},{key:"render",value:function(){return Object(f.jsx)("span",{children:this.isClip(this.props.url)?Object(f.jsx)(k,{url:this.props.url}):Object(f.jsx)("a",{href:this.props.url,target:"_blank",rel:"noreferrer",children:this.props.url})},"link-".concat((new Date).valueOf()))}}]),a}(r.a.Component),C=w,N=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"isLink",value:function(e){return 0===e.indexOf("https://")||0===e.indexOf("http://")}},{key:"render",value:function(){return Object(f.jsx)("span",{children:this.isLink(this.props.msg)?Object(f.jsx)(C,{url:this.props.msg}):this.props.msg+" "})}}]),a}(r.a.Component),S=N,D=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).index=n.props.key,n.message=n.props.msg,n.user=n.props.user,n.badges=n.props.badgeList?n.props.badgeList:[],n.chatClass="chat-line__message tw-relative p-0 list-group-item bg-dark",n}return Object(l.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("li",{className:this.chatClass,children:[Object(f.jsxs)("span",{className:"text-light",children:[this.props.time," "]}),Object(f.jsx)(g,{badges:this.badges},"badges-list-".concat((new Date).valueOf())),Object(f.jsx)("span",{style:this.user.style,children:this.user.username}),Object(f.jsx)("span",{className:"text-light",children:this.message.map((function(e,t){return"string"===typeof e?Object(f.jsx)(S,{msg:e},"".concat(e+t,"-").concat((new Date).valueOf())):Object(f.jsx)(y,{emote:e},"".concat(e+t,"-").concat((new Date).valueOf()))}))})]},this.index)}}]),a}(r.a.Component),E=(a(49),function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={streamerInput:""},n}return Object(l.a)(a,[{key:"changeHandler",value:function(e){this.setState({streamerInput:e.target.value})}},{key:"clickHandler",value:function(){this.props.onClickHandler(this.state.streamerInput)}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"d-flex",id:"header",children:[Object(f.jsx)("input",{className:"form-control mr-4",id:"streamer-input",onChange:this.changeHandler.bind(this),placeholder:"Enter Streamer Name"}),Object(f.jsx)("button",{className:"btn btn-primary p-1",id:"enter-btn",onClick:this.clickHandler.bind(this),children:"Enter Chat"}),Object(f.jsx)("small",{className:"px-4",children:this.props.streamer})]})}}]),a}(r.a.Component)),H=a(58),L=a(59),T=a(60),B=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).scrollToBottom=function(){e.messagesEnd.scrollIntoView({behavior:"smooth"})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return Object(f.jsxs)(H.a,{fluid:!0,children:[Object(f.jsx)(E,{onClickHandler:this.props.streamerClickHandler,streamer:this.props.streamer}),Object(f.jsxs)(L.a,{children:[Object(f.jsxs)(T.a,{sm:6,xs:12,className:"pr-0",children:[Object(f.jsx)("small",{className:"text-light",children:"TOP CHAT"}),Object(f.jsxs)("ul",{id:"top-chat",className:"list-group",children:[this.props.msgs.map((function(e){return Object(f.jsx)(D,{time:e.time,badgeList:e.badgeList,msg:e.msg,user:e.user},e.key)})),Object(f.jsx)("li",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]})]}),Object(f.jsx)(T.a,{sm:6,xs:12,className:"pl-0",children:Object(f.jsx)("iframe",{id:"live-chat",src:this.props.url,width:this.props.width,height:this.props.height,title:"Streamer Chat"})})]})]})}}]),a}(r.a.Component),I=B,F=(a(50),{}),P=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={topChats:[],url:"",width:940,height:865,streamer:"No Active Stream"},m.a.onChat=function(t,a,n,r,s){e.appendMessage(t,a,n,s)},e.currentStreamer="",window.addEventListener("resize",e.resizeHandler.bind(Object(u.a)(e))),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.resizeHandler()}},{key:"getPadding",value:function(e,t){return Number(e.replace("px",""))+Number(t.replace("px",""))}},{key:"resizeHandler",value:function(){var e=document.documentElement.clientHeight,t=document.documentElement.clientWidth,a=document.getElementById("header"),n=window.getComputedStyle(a),r={height:e-a.offsetHeight,width:t/2-20};t<415&&(r.width=t-20,r.height=e-document.getElementById("top-chat").offsetHeight-a.offsetHeight-this.getPadding(n.paddingTop,n.paddingBottom)-25),this.setState(r)}},{key:"joinStream",value:function(e){e!==this.currentStreamer&&(this.currentStreamer&&m.a.Disconnect(),this.currentStreamer=e,this.setState({streamer:this.currentStreamer,topChats:[]}),m.a.Init(e),this.updateUrl(e),this.getEmotes())}},{key:"getEmotes",value:function(){var e=this,t=this.currentStreamer;F[t]||fetch("https://emotes.adamcy.pl/v1/channel/".concat(t,"/emotes/all")).then((function(e){return e.json()})).then((function(a){if(a.error)e.setState({streamer:"Could not find user ".concat(t,", try again."),url:""});else{var n={};a.forEach((function(e){return n[e.code]=e.urls.map((function(e){return"".concat(e.url," ").concat(e.size)}))})),F[t]={lastRetrieved:(new Date).valueOf(),allEmotes:n}}}),(function(e){F[t]={lastRetrieved:(new Date).valueOf(),allEmotes:[]}}))}},{key:"streamerClickHandler",value:function(e){e&&this.joinStream(e)}},{key:"updateUrl",value:function(e){this.setState({url:"https://www.twitch.tv/embed/".concat(e,"/chat?parent=topchat.tv&darkpopout")})}},{key:"parseForEmotes",value:function(e){var t=F[this.currentStreamer].allEmotes;return e.split(" ").map((function(e){return t[e]?{name:e,urls:t[e].join(",")}:e}))}},{key:"appendMessage",value:function(e,t,a,n){var r=[],s=!1,i=t;if(a.broadcaster&&(r.push({key:"broadcaster"+(new Date).valueOf(),type:"broadcaster",name:"Broadcaster"}),s=!0),a.mod&&(r.push({key:"mod"+(new Date).valueOf(),type:"mod",name:"Moderator"}),s=!0),a.vip&&(r.push({key:"vip"+(new Date).valueOf(),type:"vip",name:"VIP"}),s=!0),n.userBadges&&n.userBadges.partner&&(r.push({key:"partner"+(new Date).valueOf(),type:"partner",name:"Partner"}),s=!0),s){var o=": ".concat(i),l=this.state.topChats,u={key:e+(new Date).valueOf(),badgeList:r,msg:this.parseForEmotes(o),time:new Date(Number(n.timestamp)).toTimeString().substr(0,8),user:{username:e,style:{color:n.userColor}}};l.length>100&&l.unshift(),this.setState({topChats:[].concat(Object(c.a)(l),[u])})}}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"App bg-dark text-light",children:Object(f.jsx)(I,{msgs:this.state.topChats,url:this.state.url,height:this.state.height,width:this.state.width,streamerClickHandler:this.streamerClickHandler.bind(this),streamer:this.state.streamer})})}}]),a}(r.a.Component),U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root")),U()}},[[51,1,2]]]);
//# sourceMappingURL=main.5dd53729.chunk.js.map